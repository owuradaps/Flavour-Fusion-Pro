{% extends "base.html" %}
{% load static %}

{% block content %}
<div style="max-width: 800px; margin: 20px auto; padding: 20px; background-color: rgba(248, 249, 250, 0.6); border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.03);">
    <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Your Profile</h2>
    <div style="display: flex; flex-wrap: wrap;">
        <!-- Profile Picture Section -->
        <div style="flex: 1; min-width: 200px; padding: 10px; text-align: center;">
            {% if user.profile.profile_picture %}
                <img src="{{ user.profile.profile_picture.url }}" alt="Profile Picture" style="max-width: 180px; height: auto; border-radius: 50%; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
            {% else %}
                <img src="{% static 'images/default_profile.png' %}" alt="Default Profile Picture" style="max-width: 180px; height: auto; border-radius: 50%; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
            {% endif %}
        </div>
        
        <!-- Profile Details Section -->
        <div style="flex: 2; min-width: 300px; padding: 10px;">
            <div id="profile-info">
                <h4 style="color: #333;">User Information</h4>
                <p><strong>Username:</strong> {{ user.username }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <h4 style="color: #333; margin-top: 20px;">Profile Information</h4>
                <p><strong>Bio:</strong> {{ user.profile.bio|default:"No bio provided" }}</p>
                <p><strong>Location:</strong> {{ user.profile.location|default:"No location provided" }}</p>
                <button id="edit-profile-btn" style="background-color: rgba(0, 123, 255, 0.8); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s;">Edit Profile</button>
            </div>

            <div id="profile-form" style="display: none;">
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div>
                        <h4 style="color: #333;">User Information</h4>
                        {{ u_form.as_p }}
                    </div>
                    <div>
                        <h4 style="color: #333; margin-top: 20px;">Profile Information</h4>
                        {{ p_form.as_p }}
                    </div>
                    <button type="submit" style="background-color: rgba(40, 167, 69, 0.8); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s;">Update Profile</button>
                    <button type="button" id="cancel-edit-btn" style="background-color: rgba(220, 53, 69, 0.8); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s;">Cancel</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const profileInfo = document.getElementById('profile-info');
        const profileForm = document.getElementById('profile-form');
        const editBtn = document.getElementById('edit-profile-btn');
        const cancelBtn = document.getElementById('cancel-edit-btn');

        editBtn.addEventListener('click', function() {
            profileInfo.style.display = 'none';
            profileForm.style.display = 'block';
        });

        cancelBtn.addEventListener('click', function() {
            profileForm.style.display = 'none';
            profileInfo.style.display = 'block';
        });
    });
</script>
{% endblock %}